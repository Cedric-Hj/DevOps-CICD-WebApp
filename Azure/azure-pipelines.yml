trigger:
  branches:
    include:
      - test  # You can change this to your desired branch

pool:
  vmImage: ubuntu-latest

steps:
  - task: UseNode@1
    inputs:
      versionSpec: '16.x'  # Use Node version 16.x (adjust if necessary)

  # Step 1: Change directory to 'Azure' to access package.json
  - script:
      cd Azure  # Change directory to where package.json is located
      npm install  # Install dependencies
    displayName: 'Install dependencies'

  # Step 2: Install Playwright Browsers
  - script:
      cd Azure  # Ensure we are in the correct directory
      npx playwright install  # Install Playwright browsers
    displayName: 'Install Playwright Browsers'

  # Step 3: Run Playwright Tests
  - script:
      cd Azure  # Ensure we are in the correct directory
      npm test  # Run the tests (npm test should run Playwright tests)
    displayName: 'Run Playwright Tests'
